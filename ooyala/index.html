<!doctype html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Ooyala Extension Sample</title>
        <script src="https://www.contentstack.com/sdks/contentstack-ui-extensions/dist/latest/ui-extension-sdk.js"></script> 
        <link href="https://www.contentstack.com/sdks/contentstack-ui-extensions/dist/latest/ui-extension-sdk.css" rel="stylesheet" type="text/css" media="all">
        <style media="all">
a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font-weight:500;font-family:'Whitney SSm A','Whitney SSm B',Arial;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}.wrapper{margin:0;padding:0;width:100%}.wrapper .container{width:1200px;margin:0 auto;overflow:hidden}.wrapper .container .discription_box{width:100%;float:left}.discription_box ul{width:100%;float:left;display:block;padding-bottom:25px}.discription_box ul li[id]{width:30.33%;float:left;display:block;margin-right:3%;border:1px solid #ccc}.discription_box ul li img{width:100%;height:auto;position:relative}.discription_box ul li span{font-size:14px;line-height:20px;display:block;border-radius:32px}.discription_box ul li span.title{font-size:16px;line-height:20px;padding:10px 10px 5px;display:block;color:#748590}.discription_box ul li p{font-size:12px;line-height:14px;padding:0 10px 20px;margin-bottom:0;color:#748590}.discription_box ul li{position:relative;display:block}.discription_box .choose_video{border:1px solid #25c2a3;border-radius:24px;font-size:14px;line-height:1.42857143;padding:5px 15px;display:inline-block;text-align:center;text-decoration:none;color:#25c2a3}.wrapper .container .list_section{width:100%;display:none;float:left}.wrapper .container .list_section form{padding-top:20px}.list_section ul{width:100%;float:left;display:block;padding-top:35px;padding-bottom:25px}.list_section ul li{width:28.33%;float:left;display:block;margin-right:4.2%;border:1px solid transparent;margin-bottom:19px}.list_section ul li:nth-child(3n+3){margin-right:0}.list_section ul li section{position:relative;display:block;height:150px;width:100%}.list_section ul li section img{width:100%;height:100%;position:relative;cursor:default}.list_section ul li span.title{font-size:16px;line-height:20px;padding:10px 10px 5px;display:block;color:#748590}.list_section ul li p{font-size:12px;line-height:14px;padding:0 10px 20px;margin-bottom:0;color:#748590}.list_section ul li.selected{position:relative;border:1px solid #4895e6}.list_section ul li.selected:after{width:8px;position:absolute;content:'';right:15px;top:7px;height:8px;border-radius:50%;border:7px solid #4895e6;background:#fff}@media (max-width:1200px){.wrapper .container{width:100%}.list_section ul li{margin-right:4%;cursor:pointer}}.list_section ul li:nth-child(3n+3){margin-right:4%}.reference-loading{width:50%}.reference-loading .loader,.reference-loading .loader:after,.reference-loading .loader:before{border-radius:50%;width:1.3em;height:1.3em;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation:load7 1.8s infinite ease-in-out;animation:load7 1.8s infinite ease-in-out}.reference-loading .loader{color:#25c2a3;font-size:10px;position:relative;text-indent:-9999em;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s;top:-20px;margin-left:6%}.reference-loading .loader:after,.reference-loading .loader:before{content:'';position:absolute;top:0}.reference-loading .loader:before{left:-2.5em;-webkit-animation-delay:-.32s;animation-delay:-.32s}.reference-loading .loader:after{left:2.5em}.msg{display:none;padding-left:20px}.list_section ul li a img{width:100%;height:150px;position:relative}.discription_box ul li img{width:100%;height:150px;position:relative;cursor:default}.reference-loading{display:inline-block;margin-left:50px}@-webkit-keyframes load7{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes load7{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}.reference-loading .loading{text-align:center;margin:20px auto}.reference-loading .loading-flash div{border-radius:50%;height:10px;width:10px;display:inline-block;box-sizing:border-box;background:#25c2a3}.reference-loading .loading-flash div:nth-of-type(4){animation:flash .4s .5s ease-in-out infinite}.reference-loading .loading-flash div:nth-of-type(3){animation:flash .4s .2s linear infinite}.reference-loading .loading-flash div:nth-of-type(2){animation:flash .4s -.1s linear infinite}.reference-loading .loading-flash div:nth-of-type(1){animation:flash .4s -.4s linear infinite}@keyframes flash{0%{opacity:0}50%{opacity:.5}100%{opacity:1}}
</style>
        <script type="text/javascript" src="https://assets.contentstack.io/v3/assets/blt30b41f7b9a5d7467/bltc8e1a7c2b251bb36/5b210d634b75c4de05141d6e/jquery-1.11.1.js"></script>
    </head>
    

<body>
    <div class="wrapper">
        <div class="container">
            <div class="discription_box">
                <ul>
                    <li>
                        
                    </li>
                </ul>
                <a href="#" class="choose_video">Choose Video</a>
                 <div class="reference-loading">
                	<div class="loading-flash">
                	    <div></div>
                	    <div></div>
                	    <div></div>
                	    <div></div>
                	 </div>
                </div>
            </div>
           
            <!-- list section start  here -->
            <div class="list_section">
                <form action>
                    <input type="search" class="cs-text-box w-100 searchInpput" placeholder="Search...">
                </form>
                <div class="msg">No Videos Found</div>
                <ul id="products">
                </ul>
            </div>
            <!-- list section ends  here -->
        </div>
    </div>

    <script>
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var extensionField,loader,unorderedList,msg,initialList,request={};function render(e){unorderedList.empty(),msg.hide(),console.log(e,"-----------------------------"),e.forEach(function(e,n){$(".list_section ul").append('<li id="blt'+e.embed_code+'"><a><img src="'+e.preview_image_url+'" alt="image-6"></a> <span class="title">'+e.name+"</span><p>"+e.description+"</p></li>")});e=extensionField&&extensionField.field&&extensionField.field.getData()?extensionField.field.getData():null;e&&(e=document.getElementById(e),e=$(e)[0].outerHTML,$(".discription_box ul").html(e),$(".discription_box ul li a").click(function(e){e.preventDefault()})),extensionField.window.enableAutoResizing(),$(".choose_video").click(function(e){$(".list_section").show()}),extensionField.setReady(),domEvents()}function domEvents(){extensionField.window.enableAutoResizing(),$(".searchInpput").on("keypress",function(e){var n=$(this).val().toLowerCase();if(13==e.keyCode){if(console.log("enter"),e.preventDefault(),!n)return render(initialList);request.search(n).then(function(e){return 0===e.length?(loader.hide(),unorderedList.empty(),void msg.show()):void render(e)})}}),$(".searchInpput").on("keyup",function(e){var n=$(this).val().toLowerCase();if(!n)return msg.hide(),render(initialList);$(".list_section ul li").filter(function(){$(this).toggle(-1<$(this).text().toLowerCase().indexOf(n))})}),$(".list_section ul li a").click(function(e){e.preventDefault(),$(".list_section ul li").removeClass("selected"),$(this).parent().addClass("selected")}),$(".list_section ul li").click(function(){var e=$(this)[0].outerHTML;extensionField.field.setData($(this).attr("id")).then(function(){$(".discription_box ul").html(e),$(".list_section").hide()}).catch(function(e){console.log("error in setting data",e)})})}function getData(n){return console.log(n,"data parameter"),new Promise(function(t,i){extensionField.window.enableAutoResizing();var e,o=new XMLHttpRequest;for(e in o.open(n.method,n.url),loader.show(),n.headers)n.headers.hasOwnProperty(e)&&o.setRequestHeader(e,n.headers[e]);o.onload=function(e){var n;200==o.status?(loader.hide(),n=JSON.parse(o.response),t(n)):i(Error(o.statusText))},o.onerror=function(){i(Error("Network Error"))},n.data?o.send(n.data):o.send()})}$(document).ready(function(){msg=$(".msg"),loader=$(".reference-loading"),unorderedList=$(".list_section ul"),ContentstackUIExtension.init().then(function(e){extensionField=e,console.log(extensionField.config),(request=new Request(e.config)).ooyalaVideos().then(function(e){console.log(e,"res-------"),render(initialList=e)}),extensionField.window.enableAutoResizing()})});var Request=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"search",value:function(e){var i={"Content-Type":"application/x-www-form-urlencoded",api_key:extensionField.config.api_key,secret:extensionField.config.secret},o=(extensionField.config.api_key,extensionField.config.secret,extensionField.config.searchUrl+e);return new Promise(function(n,t){getData({url:o,headers:i,method:"GET"}).then(function(e){n(e)}).catch(function(e){t(e)})})}},{key:"ooyalaVideos",value:function(){var t={"Content-Type":"application/json",api_key:extensionField.config.api_key,secret:extensionField.config.secret},i=extensionField.config.url;return new Promise(function(n,e){getData({url:i,headers:t,method:"GET"}).then(function(e){console.log("data ooyala",e.items),n(e.items)},function(e){console.error("Failed!",e)})})}}]),e}();
</script>
</body>




</html>